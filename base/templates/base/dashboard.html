{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard - StudyFlow{% endblock title %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="{% static 'base/css/dashboard.css' %}">
{% endblock extra_css %}

{% block content %}

<div class=" d-flex">
    <!-- Sidebar -->
    <div class=" border-end vh-100 p-2" style="width: 250px;">
    <div class="dropdown mt-3 w-200">
        <button  class="btn dropdown-toggle btn-secondary border-dark" 
            type="button" 
            data-bs-toggle="dropdown" 
            style="background-color: #212121; color: white;"
            aria-expanded="false">
            <img src="{% static 'media/pfd.jpg' %}" alt="logo" style="width:30px; height:30px; border-radius:50%; object-fit:cover;" class="me-2">
            Brahma Borude
        </button>
        <ul class="dropdown-menu dropdown-menu-dark">
            <li><a href="{% url 'home' %}" class="dropdown-item" type="button">Home</a></li>
        </ul>
    </div>
    <ul class="nav flex-column mt-4">
        <li class="nav-item">
            <a href="{% url 'dashboard' %}" class="btn btn-success d-flex w-100 mb-2">
                <i class="bi bi-grid-1x2-fill me-5"></i> My Plans
            </a>
        </li>
        <li class="nav-item">
            <a href="#" class="btn btn-success d-flex w-100 mb-2">
                <i class="bi bi-gear-fill me-5"></i> Settings
            </a>
        </li>
        <li class="nav-item">
            <a href="#" class="btn btn-success d-flex w-100 mb-2">
                <i class="bi bi-box-arrow-right me-5"></i> Logout
            </a>
        </li>
    </ul>
    
    </div>

    <!-- Main Content -->
    <div class="flex-grow-1 p-4" style="background-color: #121212;">
    <div class="d-flex justify-content-between align-items-center mb-2">
        <h4>Welcome to StudyFlow, Brahma ðŸ‘‹</h4>
        <a href="{% url 'create-course' %}" class="btn btn-primary">+ New Plan</a>
    </div>
    <hr class="border border-secondary">

    <!-- Search Bar -->
    {% comment %} <form action="search.html" method="GET" class="mb-4">
        <div class="input-group">
        <input type="text" class="form-control" name="query" placeholder="What do you want to learn?">
        <button class="btn btn-primary" type="submit">Search</button>
        </div>
    </form> {% endcomment %}
    <div class="row mb-0">
        {% if courses %}
            {% for course in courses %}
                <div class="col-md-4 mb-4">
                    <div class="card h-100 shadow-sm" style="background-color: #212121; color: #b7b7b7;">
                        <div class="card-body">
                            <h5 class="card-title text-capitalize">{{ course.plan_name }}</h5>
                            <p class="card-text">
                                <strong>Topic:</strong> {{ course.topic }} <br>
                                <strong>Stage:</strong> {{ course.stage }}
                            </p>
                            <a href="{% url 'course_detail' course.id %}" 
                            class="btn btn-sm text-white" style="background-color: #0768a6">
                                Open
                            </a>
                            <a href="{% url 'delete_plan' course.id %}" 
                            class="btn btn-sm btn-danger">
                                Delete
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="text" style="color: #616161ff">No courses created yet. Click "New Plan" to start!</p>
            <div class="d-flex justify-content-center" style="margin-top: 200px;">
                <img src="{% static 'media/learning.png' %}" alt="Logo" style="width:500px;">
            </div>
        {% endif %}
    </div>



</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock content %}